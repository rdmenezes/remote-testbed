#summary How to install and maintain a testbeds with Re-Mote
#labels Manual-Administrator,Featured

= Administrators Guide to Re-Mote =

_This page should be gradually extended to hold all information useful for administrators, from instructions on how to install and configure the testbed as well as information about maintaining a running testbed._

[#An_Overview_of_the_Testbed_Framework An Overview of the Testbed Framework]
[#Installing_the_Testbed Installing the Testbed]

== An Overview of the Testbed Framework ==

The Re-Mote Testbed Framework consists of 4 basic components:

Database Scripts (`remote-db`)

   Contains SQL scripts for creating and maintaining the MySQL database. It is used by the web service and mote control component for tracking the state--static as well as dynamic--of the testbed. The underlying data model is based on the three fundamental entities: motes, mote host sites, and user sessions.

Web Services (`remote-ws`)

   Defines Java-classes that provide web services which allow clients to interact with the testbed. The web services are responsible for authenticating users, granting access to motes, and getting mote specific information, such as availability and MAC address.

Mote Control Infrastructure (`remote-mci`)

   Provides the infrastructure that keeps track of which motes have been deployed and where. It is divided into two parts: the mote control host (MCH), which is responsible for the low-level interaction with the motes in the testbed, and the mote control server (MCS), which serves mainly as message forwarder between mote hosts and connected clients. Written in C++ for performance.

GUI Client (`remote-gui`)

   Implements client Java-libraries for interacting both with the web services and the mote control server and a GUI client allowing users to connect to a testbed, program motes, and monitor console output from motes. The client has been written to work with different testbeds and should not require any changes regardless of differences in for example the user model.

== Considerations ==

Before deploying, please also read the SecurityConsiderations.

== Installing the Testbed ==

First get the SourceCode.

=== Library and Program Dependencies ===

== Managing Users and Projects ==

The *user_model* module in the database component contains a series of scripts, which can be used for managing user and project information. Users and projects accounts are created separately and can afterward be associated by adding a user to a project allowing users to
be members of multiple different project.

Below is a small example where a user and a project is set up. It assumes that the `user_model/scripts/credentials.sh` file has been changed to automatically set database password. This can be done via something like the following:
{{{
export USER=remote_admin
export PASS=remote
export HOST=localhost
export MYSQL="mysql -u$USER -p$PASS -h$HOST"
export DBNAME=REMOTE
}}}

First, create a user:
{{{
$ ./user_model/scripts/create_user.sh
Enter login of new user:
fonseca
Enter password of new user:
secret
Enter email address of new user:
fonseca@diku.dk
Enter full name of new user:
Jonas Fonseca
insert into user(login,password,name,email) values ('fonseca',md5('secret'),'Jonas Fonseca','fonseca@diku.dk');
}}}

Next, create a project:
{{{
$ ./user_model/scripts/create_project.sh
Enter name of new project:
test
creating test;
insert into project(name) values ('test');
}}}

Finally, add the user to the project:
{{{
./user_model/scripts/add_user_project.sh
Enter login of user:
fonseca
Enter name of project:
test
insert into user_project(user_id,project_id) select (select id from user where login='fonseca'),(select id from project where name='test')
grant select,insert,delete,update on test.* to 'fonseca'@'%'
}}}

The remaining scripts can be used for changing a user password,
removing a user from a project, and deleting a user or project
account.